# 요건정의서: Timebox Planner

## 1. 개요
- **프로젝트명**: timebox-planner
- **요청 부서**: 자기계발/생산성팀
- **작성일**: 2026-02-28
- **버전**: v1.0
- **작성자**: PM Agent (Antigravity)

---

## 2. 프로젝트 배경 및 목적

Timebox Planner는 **시간박스(Timebox)** 기법을 활용한 개인 및 팀 생산성 관리 웹 애플리케이션이다.
사용자는 하루의 작업을 시간 블록 단위로 계획하고, 실시간 타이머로 집중 세션을 관리하며, 완료 후 회고 데이터를 통해 생산성 패턴을 분석할 수 있다.

**핵심 가치**:
- 계획한 시간에 집중 → 달성 → 회고 의 사이클 자동화
- 데이터 기반 생산성 인사이트 제공
- 직관적인 드래그&드롭 시간 블록 UI

---

## 3. 기능 요구사항 (Functional Requirements)

### FR-001: 회원 가입 및 로그인
- **설명**: 이메일/비밀번호 기반 회원 가입, 로그인, 로그아웃, JWT 기반 인증
- **우선순위**: P0 (필수)
- **비즈니스 규칙**:
  - 이메일은 중복 불가
  - 비밀번호: 최소 8자, 영문+숫자+특수문자 조합
  - JWT Access Token 유효 시간: 1시간
  - Refresh Token 유효 시간: 7일
- **관련 TC**: TC-001, TC-002, TC-003

### FR-002: 할 일(Task) CRUD
- **설명**: 할 일 항목 생성, 조회, 수정, 삭제 기능
- **우선순위**: P0 (필수)
- **비즈니스 규칙**:
  - 제목: 1~200자 필수
  - 설명: 0~2000자 선택
  - 우선순위: HIGH / MEDIUM / LOW (기본값: MEDIUM)
  - 예상 소요 시간: 5분 단위 (최소 5분, 최대 8시간)
  - 태그: 최대 5개
  - 상태: TODO / IN_PROGRESS / DONE / CANCELLED
- **관련 TC**: TC-004, TC-005, TC-006, TC-007

### FR-003: Timebox (시간 블록) 계획
- **설명**: 특정 날짜의 시간대에 할 일을 배치하는 시간 블록 계획 기능
- **우선순위**: P0 (필수)
- **비즈니스 규칙**:
  - 하루 단위 뷰 (00:00 ~ 23:59)
  - 시간 블록은 30분 단위로 생성
  - 동일 시간대에 블록 중복 불가
  - 블록은 드래그&드롭으로 이동 가능 (프론트엔드)
  - 최대 하루 16개 블록 등록 가능
- **관련 TC**: TC-008, TC-009, TC-010

### FR-004: 집중 타이머 (Pomodoro/Timebox Timer)
- **설명**: 선택한 Timebox 블록에 대해 카운트다운 타이머를 실행하는 기능
- **우선순위**: P0 (필수)
- **비즈니스 규칙**:
  - 타이머 시작/일시정지/중단/완료 상태 관리
  - 설정한 시간이 종료되면 알림(Web Notification) 발송
  - 타이머 완료 시 자동으로 Task 상태를 IN_PROGRESS → DONE 변경 (사용자 확인 후)
  - 집중 세션 이력 기록 (시작 시간, 종료 시간, 실제 집중 시간)
- **관련 TC**: TC-011, TC-012, TC-013

### FR-005: 일별/주별 대시보드
- **설명**: 계획 대비 실제 완료율, 집중 시간 통계를 보여주는 대시보드
- **우선순위**: P1 (중요)
- **비즈니스 규칙**:
  - 일별 완료율: 완료된 블록 수 / 전체 블록 수 × 100
  - 주별 집중 시간 합계 (단위: 시간)
  - 가장 많이 사용한 태그 Top 5
  - 최근 7일 데이터 기본 조회
- **관련 TC**: TC-014, TC-015

### FR-006: 태그 관리
- **설명**: 할 일에 부착하는 태그를 생성, 조회, 수정, 삭제하는 기능
- **우선순위**: P1 (중요)
- **비즈니스 규칙**:
  - 태그명: 1~30자
  - 태그 색상: HEX 색상 코드 (선택)
  - 사용자당 최대 50개 태그 생성 가능
- **관련 TC**: TC-016, TC-017

### FR-007: 집중 세션 회고 (Retrospective)
- **설명**: 완료된 Timebox 세션에 대한 메모/평점을 남기는 회고 기능
- **설명**: 완료 시 회고 프롬프트(팝업) 표시
- **우선순위**: P2 (선택)
- **비즈니스 규칙**:
  - 만족도 평점: 1~5점
  - 회고 메모: 최대 500자
  - 회고는 세션 완료 후 24시간 이내에만 작성 가능
- **관련 TC**: TC-018, TC-019

---

## 4. 비기능 요구사항 (Non-Functional Requirements)

### NFR-001: 성능
- **응답 시간**: API 95% 요청이 200ms 이내 처리
- **동시 사용자**: 최소 1,000명 동시 접속 지원
- **페이지 로드**: 초기 로드 3초 이내 (LCP 기준)

### NFR-002: 보안 (ISMS-P 준수)
- JWT 기반 인증, HTTPS 강제
- 비밀번호 BCrypt 암호화
- XSS / SQL Injection 방지
- 민감 정보 응답 필드 제외

### NFR-003: 가용성
- 서비스 업타임 99.5% 이상
- 장애 발생 시 복구 시간 목표(RTO): 30분 이내

### NFR-004: 호환성
- 지원 브라우저: Chrome 120+, Firefox 120+, Safari 17+
- 모바일 반응형 UI (최소 320px 이상)

### NFR-005: 확장성
- MSA 구조로 서비스 분리 가능한 설계
- DB 스키마 마이그레이션 지원 (Flyway)

---

## 5. 핵심 예외 케이스 (Exception Cases)

| EC-ID | 상황 | 처리 방식 |
|-------|------|----------|
| EC-001 | 이미 사용 중인 이메일로 회원 가입 시도 | HTTP 409 Conflict, 에러 코드 E001 반환 |
| EC-002 | 만료된 JWT 토큰으로 API 호출 | HTTP 401 Unauthorized, 재로그인 유도 |
| EC-003 | 다른 사용자의 Task 수정/삭제 시도 | HTTP 403 Forbidden, 에러 코드 E003 반환 |
| EC-004 | 동일 시간대에 Timebox 블록 중복 생성 시도 | HTTP 409 Conflict, 에러 코드 E004 반환 |
| EC-005 | 실행 중인 타이머가 있는 상태에서 다른 타이머 시작 시도 | HTTP 409 Conflict, 에러 코드 E005 반환 |
| EC-006 | 존재하지 않는 Task/Timebox 조회 시도 | HTTP 404 Not Found, 에러 코드 E006 반환 |
| EC-007 | 사용자당 태그 50개 초과 생성 시도 | HTTP 422 Unprocessable Entity, 에러 코드 E007 반환 |
| EC-008 | 완료 후 24시간 경과된 세션 회고 작성 시도 | HTTP 422 Unprocessable Entity, 에러 코드 E008 반환 |
| EC-009 | 타이머 진행 중 Timebox 블록 삭제 시도 | HTTP 409 Conflict, 에러 코드 E009 반환 |
| EC-010 | 비밀번호 형식 미준수 (8자 미만, 조합 불충족) | HTTP 400 Bad Request, 에러 코드 E010 반환 |

---

## 6. 제약사항

- 백엔드: Kotlin + Spring Boot 3.x + jOOQ + PostgreSQL
- 프론트엔드: Next.js 14+ (App Router) + Tailwind CSS v4 + shadcn/ui + TanStack Query
- 인증: JWT (Access + Refresh Token)
- 인프라: Docker Compose (로컬 개발), GitHub Actions (CI)
- 단일 사용자(개인 플래너) → 초기 버전에서 팀 기능 제외

---

## 7. 가정사항

- 초기 버전은 웹 전용 (모바일 앱 제외)
- 외부 캘린더 연동 (Google/Outlook) 은 v2에서 고려
- 실시간 알림은 Web Push API 활용 (서버 푸시 제외)
- 파일 첨부 기능은 범위 외
